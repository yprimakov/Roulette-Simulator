@{
    ViewBag.Title = "Roulette Strategy Simulator";
    ViewBag.hideHeader = true;
}

<div>
    <div id="roulette" ng-controller="RouletteGameController as game">
        <div class="row">
            <div class="col-md-11 text-center">
                <table class="roulette margin-bottom-20" border="1" style="width:100%">
                    <tr>
                        <td rowspan="3" class="tile tile-0">
                            <span ng-click="game.placeBet('0')" class="btn btn-block btn-circle">0</span>
                        </td>
                        <td rowspan="2" class="tile tile-3">
                            <span ng-click="game.placeBet('3')" class="btn btn-circle">3</span>
                        </td>
                        <td rowspan="2" class="tile tile-6">
                            <span ng-click="game.placeBet('6')" class="btn btn-circle">6</span>
                        </td>
                        <td rowspan="2" class="tile tile-9">
                            <span ng-click="game.placeBet('9')" class="btn btn-circle">9</span>
                        </td>
                        <td rowspan="2" class="tile tile-12">
                            <span ng-click="game.placeBet('12')" class="btn btn-circle">12</span>
                        </td>
                        <td rowspan="2" class="tile tile-15">
                            <span ng-click="game.placeBet('15')" class="btn btn-circle">15</span>
                        </td>
                        <td rowspan="2" class="tile tile-18">
                            <span ng-click="game.placeBet('18')" class="btn btn-circle">18</span>
                        </td>
                        <td rowspan="2" class="tile tile-21">
                            <span ng-click="game.placeBet('21')" class="btn btn-circle">21</span>
                        </td>
                        <td rowspan="2" class="tile tile-24">
                            <span ng-click="game.placeBet('24')" class="btn btn-circle">24</span>
                        </td>
                        <td rowspan="2" class="tile tile-27">
                            <span ng-click="game.placeBet('27')" class="btn btn-circle">27</span>
                        </td>
                        <td rowspan="2" class="tile tile-30">
                            <span ng-click="game.placeBet('30')" class="btn btn-circle">30</span>
                        </td>
                        <td rowspan="2" class="tile tile-33">
                            <span ng-click="game.placeBet('33')" class="btn btn-circle">33</span>
                        </td>
                        <td rowspan="2" class="tile tile-36">
                            <span ng-click="game.placeBet('36')" class="btn btn-circle">36</span>
                        </td>
                        <td rowspan="2" class="tile tile-3rd2to1">
                            <span ng-click="game.placeBet('3rd2to1')" class="btn btn-circle">2 to 1</span>
                        </td>
                    </tr>
                    <tr>
                        @*<td> </td>*@
                    </tr>
                    <tr>
                        <td rowspan="2" class="tile tile-2">
                            <span ng-click="game.placeBet('2')" class="btn btn-circle">2</span>
                        </td>
                        <td rowspan="2" class="tile tile-5">
                            <span ng-click="game.placeBet('5')" class="btn btn-circle">5</span>
                        </td>
                        <td rowspan="2" class="tile tile-8">
                            <span ng-click="game.placeBet('8')" class="btn btn-circle">8</span>
                        </td>
                        <td rowspan="2" class="tile tile-11">
                            <span ng-click="game.placeBet('11')" class="btn btn-circle">11</span>
                        </td>
                        <td rowspan="2" class="tile tile-14">
                            <span ng-click="game.placeBet('14')" class="btn btn-circle">14</span>
                        </td>
                        <td rowspan="2" class="tile tile-17">
                            <span ng-click="game.placeBet('17')" class="btn btn-circle">17</span>
                        </td>
                        <td rowspan="2" class="tile tile-20">
                            <span ng-click="game.placeBet('20')" class="btn btn-circle">20</span>
                        </td>
                        <td rowspan="2" class="tile tile-23">
                            <span ng-click="game.placeBet('23')" class="btn btn-circle">23</span>
                        </td>
                        <td rowspan="2" class="tile tile-26">
                            <span ng-click="game.placeBet('26')" class="btn btn-circle">26</span>
                        </td>
                        <td rowspan="2" class="tile tile-29">
                            <span ng-click="game.placeBet('29')" class="btn btn-circle">29</span>
                        </td>
                        <td rowspan="2" class="tile tile-32">
                            <span ng-click="game.placeBet('32')" class="btn btn-circle">32</span>
                        </td>
                        <td rowspan="2" class="tile tile-35">
                            <span ng-click="game.placeBet('35')" class="btn btn-circle">35</span>
                        </td>
                        <td rowspan="2" class="tile tile-2nd2to1">
                            <span ng-click="game.placeBet('2nd2to1')" class="btn btn-circle">2 to 1</span>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="3" class="tile tile-00">
                            <span ng-click="game.placeBet('00')" class="btn btn-block btn-circle">00</span>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="2" class="tile tile-1">
                            <span ng-click="game.placeBet('1')" class="btn btn-circle">1</span>
                        </td>
                        <td rowspan="2" class="tile tile-4">
                            <span ng-click="game.placeBet('4')" class="btn btn-circle">4</span>
                        </td>
                        <td rowspan="2" class="tile tile-7">
                            <span ng-click="game.placeBet('7')" class="btn btn-circle">7</span>
                        </td>
                        <td rowspan="2" class="tile tile-10">
                            <span ng-click="game.placeBet('10')" class="btn btn-circle">10</span>
                        </td>
                        <td rowspan="2" class="tile tile-13">
                            <span ng-click="game.placeBet('13')" class="btn btn-circle">13</span>
                        </td>
                        <td rowspan="2" class="tile tile-16">
                            <span ng-click="game.placeBet('16')" class="btn btn-circle">16</span>
                        </td>
                        <td rowspan="2" class="tile tile-19">
                            <span ng-click="game.placeBet('19')" class="btn btn-circle">19</span>
                        </td>
                        <td rowspan="2" class="tile tile-22">
                            <span ng-click="game.placeBet('22')" class="btn btn-circle">22</span>
                        </td>
                        <td rowspan="2" class="tile tile-25">
                            <span ng-click="game.placeBet('25')" class="btn btn-circle">25</span>
                        </td>
                        <td rowspan="2" class="tile tile-28">
                            <span ng-click="game.placeBet('28')" class="btn btn-circle">28</span>
                        </td>
                        <td rowspan="2" class="tile tile-31">
                            <span ng-click="game.placeBet('31')" class="btn btn-circle">31</span>
                        </td>
                        <td rowspan="2" class="tile tile-34">
                            <span ng-click="game.placeBet('34')" class="btn btn-circle">34</span>
                        </td>
                        <td rowspan="2" class="tile tile-1st2to1">
                            <span ng-click="game.placeBet('1st2to1')" class="btn btn-circle">2 to 1</span>
                        </td>
                    </tr>
                    <tr>
                        @*<td></td>*@
                    </tr>
                    <tr>
                        <td rowspan="2"></td>
                        <td colspan="4" class="tile tile-1st12">
                            <span ng-click="game.placeBet('1st12')" class="btn btn-block btn-circle">1st 12</span>
                        </td>
                        <td colspan="4" class="tile tile-2nd12">
                            <span ng-click="game.placeBet('2nd12')" class="btn btn-block btn-circle">2nd 12</span>
                        </td>
                        <td colspan="4" class="tile tile-3rd12">
                            <span ng-click="game.placeBet('3rd12')" class="btn btn-block btn-circle">3rd 12</span>
                        </td>
                        <td rowspan="2" class="text-center">
                            <div ng-show="game.isPlaying && game.timeRemainingBeforeNextSpin != 0">
                                <div class="font-sm font-grey">Next spin in</div>
                                <div class="btn btn-circle btn-icon-only md-shadow-none yellow-crusta font-lg bold font-dark">{{game.timeRemainingBeforeNextSpin}}</div>
                            </div>
                            <div ng-show="game.isPlaying && game.timeRemainingBeforeNextSpin == 0">
                                <div class="font-sm font-grey">Wheel is</div>
                                <div class="btn btn-circle btn-xs md-shadow-none yellow-crusta bold font-dark">Spinning</div>
                            </div>
                            @*<div ng-hide="game.isPlaying">
                                    <div class="font-sm font-grey">&nbsp;</div>
                                    <div class="btn btn-circle yellow-crusta bold font-dark" ng-click="game.spin()">Spin</div>
                                </div>*@
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="tile tile-1to18">
                            <span ng-click="game.placeBet('1to18')" class="btn btn-block btn-circle">1 to 18</span>
                        </td>
                        <td colspan="2" class="tile tile-even">
                            <span ng-click="game.placeBet('even')" class="btn btn-block btn-circle">EVEN</span>
                        </td>
                        <td colspan="2" class="tile tile-red">
                            <span ng-click="game.placeBet('red')" class="btn btn-block btn-circle">RED</span>
                        </td>
                        <td colspan="2" class="tile tile-black">
                            <span ng-click="game.placeBet('black')" class="btn btn-block btn-circle">BLACK</span>
                        </td>
                        <td colspan="2" class="tile tile-odd">
                            <span ng-click="game.placeBet('odd')" class="btn btn-block btn-circle">ODD</span>
                        </td>
                        <td colspan="2" class="tile tile-19to36">
                            <span ng-click="game.placeBet('19to36')" class="btn btn-block btn-circle">19 to 36</span>
                        </td>
                    </tr>
                </table>
                <div class="row">
                    <div class="col-md-10 margin-bottom- text-left">
                        <span class="border-right border-right-grey margin-right-30">
                            <a href="javascript:;" class="chip chip-blue" ng-click="game.betAmount=1" ng-class="game.betAmount==1?'active':''">
                                $1
                            </a>
                            <a href="javascript:;" class="chip chip-red" ng-click="game.betAmount=5" ng-class="game.betAmount==5?'active':''">
                                $5
                            </a>
                            <a href="javascript:;" class="chip chip-yellow" ng-click="game.betAmount=10" ng-class="game.betAmount==10?'active':''">
                                $10
                            </a>
                            <a href="javascript:;" class="chip chip-green" ng-click="game.betAmount=25" ng-class="game.betAmount==25?'active':''">
                                $25
                            </a>
                            <a href="javascript:;" class="chip chip-black" ng-click="game.betAmount=100" ng-class="game.betAmount==100?'active':''">
                                $100
                            </a>
                        </span>

                        <a href="javascript:;" class="chip chip-grey-light" ng-click="game.clearBets()">
                            <small>Clear</small>
                        </a>
                        <a href="javascript:;" class="chip chip-orange-dark" ng-click="game.table.doubleBets()">
                            x2
                        </a>
                        <a href="javascript:;" class="chip chip-green-lime" ng-click="game.repeatLastBet()">
                            <i class="fa fa-refresh"></i>
                        </a>
                        @*<button class="btn btn-circle default" ng-click="game.clearBets()"><i class="fa fa-remove"></i> Clear Bets</button>*@
                    </div>
                    <div class="col-md-2 text-right">
                        <button class="btn btn-circle default" ng-click="game.spin()"><i class="fa fa-refresh"></i> Spin</button><br /><br />
                        <a href="javascript:;" ng-hide="game.isPlaying" ng-click="game.playGame()" class="btn btn-circle btn-primary"><i class="fa fa-play"></i> Play</a>
                        <a href="javascript:;" ng-show="game.isPlaying" ng-click="game.stopGame()" class="btn btn-circle red-mint"><i class="fa fa-square"></i> Stop</a>

                    </div>
                </div>
            </div>
            <div class="col-md-1">
                <div class="felt-dark" style="overflow: hidden; height: 396px;">
                    <div class="row">
                        <h5 class="col-md-12 text-center font-grey-steel">
                            History
                        </h5>
                    </div>
                    <hr class="small border-grey-silver" />
                    <div class="row" ng-repeat="item in game.history | orderBy:'id':true">
                        @*<div class="col-md-4"><span class="font-xs font-grey-silver">{{item.id}}</span></div>*@
                        <div class="col-md-8 col-md-offset-2">
                            <div class="text-left font-red-mint bold" ng-class="$index==0?'font-lg':''" ng-show="item.number.color=='red'">{{item.number.name}}</div>
                            <div class="text-right font-yellow-crusta bold" ng-class="$index==0?'font-lg':''" ng-show="item.number.color=='black'">{{item.number.name}}</div>
                            <div class="text-center font-green-jungle bold" ng-class="$index==0?'font-lg':''" ng-show="item.number.color=='green'">{{item.number.name}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="portlet light felt-dark md-shadow-z-1">
                    <div class="portlet-title">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="caption font-lg">
                                    <i class="fa fa-money"></i>
                                    <span class="caption-subject">Balance: <span class="bold">${{game.remainingPlayerBalance()}}</span></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="caption font-lg">
                                    <i class="fa fa-empire"></i>
                                    <span class="caption-subject">Bet: <span class="bold">${{game.totalBets}}</span></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="caption font-lg">
                                    <i class="fa fa-smile-o"></i>
                                    <span class="caption-subject">Winnings: <span class="bold">${{game.totalWinnings}}</span></span>
                                </div>
                            </div>
                            @*<div class="col-md-3 text-right">
                                    <a href="javascript:;" class="btn btn-circle btn-xs" ng-click="game.showOptions=!game.showOptions" ng-class="game.showOptions?'grey-gallery':'default'"><i class="fa fa-gear"></i> Settings</a>
                                </div>*@
                        </div>
                        @*<div class="actions">
                            </div>*@
                    </div>
                    <div class="portlet-body">
                        <div class="row">

                            <div class="col-md-4">
                                <h4><i class="fa fa-pie-chart font-sm"></i> Basic Statistics</h4>
                                <hr class="small" />
                                <div class="row">
                                    <div class="col-md-5 name">Total spins</div>
                                    <div class="col-md-7 value">{{game.history.length}}</div>
                                </div>
                                <div class="row">
                                    <div class="col-md-5 name">Total # of bets</div>
                                    <div class="col-md-7 value">{{game.totalNumberOfBets}}</div>
                                </div><br />
                                <div ng-show="game.history.length">
                                    <div class="row">
                                        <div class="col-md-5 name">Starting Balance</div>
                                        <div class="col-md-7 value">${{game.startingBankroll}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-5 name">Max Balance</div>
                                        <div class="col-md-7 value">${{game.playerBalanceRecordHigh}}</div>
                                    </div><br />
                                    <div class="row">
                                        <div class="col-md-5 name">Red</div>
                                        <div class="col-md-7 value">{{game.percentRed}}%</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-5 name">Black</div>
                                        <div class="col-md-7 value">{{game.percentBlack}}%</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-5 name">Zeros</div>
                                        <div class="col-md-7 value">{{game.percentGreen}}%</div>
                                    </div><br />
                                    <div class="row">
                                        <div class="col-md-5 name">Odd</div>
                                        <div class="col-md-7 value">{{game.percentOdd}}%</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-5 name">Even</div>
                                        <div class="col-md-7 value">{{game.percentEven}}%</div>
                                    </div><br />
                                    <div class="row">
                                        <div class="col-md-5 name">Low</div>
                                        <div class="col-md-7 value">{{game.percentLow}}%</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-5 name">High</div>
                                        <div class="col-md-7 value">{{game.percentHigh}}%</div>
                                    </div><br />
                                </div>
                            </div>
                            <div class="col-md-4">
                                <h4><i class="fa fa-bar-chart font-sm"></i> Consecutive Counters <i class="fa fa-info-circle tooltips font-sm" data-original-title="Number of consecutive type of numbers"></i></h4>
                                <hr class="small" />
                                <div ng-show="game.history.length">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="table full-width text-center" border="1">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center">1-18</th>
                                                        <th class="text-center">EVEN</th>
                                                        <th class="text-center bg-red-mint">RED</th>
                                                        <th class="text-center bg-dark">BLACK</th>
                                                        <th class="text-center">ODD</th>
                                                        <th class="text-center">19-36</th>
                                                    </tr>
                                                </thead>
                                                <tr>
                                                    <td><div ng-class="game.trailingLowCount >= game.consecutivePatternMin ?'bold font-yellow-lemon':''">{{game.trailingLowCount}}</div></td>
                                                    <td><div ng-class="game.trailingEvenCount >= game.consecutivePatternMin ?'bold font-yellow-lemon':''">{{game.trailingEvenCount}}</div></td>
                                                    <td><div ng-class="game.trailingRedCount >= game.consecutivePatternMin ?'bold font-yellow-lemon':''">{{game.trailingRedCount}}</div></td>
                                                    <td><div ng-class="game.trailingBlackCount >= game.consecutivePatternMin ?'bold font-yellow-lemon':''">{{game.trailingBlackCount}}</div></td>
                                                    <td><div ng-class="game.trailingOddCount >= game.consecutivePatternMin ?'bold font-yellow-lemon':''">{{game.trailingOddCount}}</div></td>
                                                    <td><div ng-class="game.trailingHighCount >= game.consecutivePatternMin ?'bold font-yellow-lemon':''">{{game.trailingHighCount}}</div></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    @*<div class="row">
                                            <div class="col-md-5 name">Trailing Red</div>
                                            <div class="col-md-7 value" ng-class="game.trailingRedCount >= game.consecutivePatternMin ?'bold':''">{{game.trailingRedCount}} spin(s)</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-5 name">Trailing Black</div>
                                            <div class="col-md-7 value" ng-class="game.trailingBlackCount >= game.consecutivePatternMin ?'bold':''">{{game.trailingBlackCount}} spin(s)</div>
                                        </div><br />
                                        <div class="row">
                                            <div class="col-md-5 name">Trailing Odd</div>
                                            <div class="col-md-7 value" ng-class="game.trailingOddCount >= game.consecutivePatternMin ?'bold':''">{{game.trailingOddCount}} spin(s)</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-5 name">Trailing Even</div>
                                            <div class="col-md-7 value" ng-class="game.trailingEvenCount >= game.consecutivePatternMin ?'bold':''">{{game.trailingEvenCount}} spin(s)</div>
                                        </div><br />
                                        <div class="row">
                                            <div class="col-md-5 name">Trailing Low</div>
                                            <div class="col-md-7 value" ng-class="game.trailingLowCount >= game.consecutivePatternMin ?'bold':''">{{game.trailingLowCount}} spin(s)</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-5 name">Trailing High</div>
                                            <div class="col-md-7 value" ng-class="game.trailingHighCount >= game.consecutivePatternMin ?'bold':''">{{game.trailingHighCount}} spin(s)</div>
                                        </div>*@
                                    <div ng-show="game.maxTrailingCount">
                                        <h4><i class="fa fa-area-chart font-sm"></i> Statistical Analysis <i class="fa fa-info-circle tooltips font-sm" data-original-title="Number of consecutive type of numbers"></i></h4>
                                        <hr class="small" />
                                        <div class="row">
                                            <div class="col-md-5 name">Max Count</div>
                                            <div class="col-md-7 value">{{game.maxTrailingCount}} spins on {{game.maxTrailingType}}</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-5 name">Max Consec Losses </div>
                                            <div class="col-md-7 value">{{game.maxConsecutiveLossCount}} losses on {{game.maxConsecutiveLossType}}</div>
                                        </div><br />
                                    </div>
                                    <div class="row" ng-repeat="(key, val) in game.trailingUniques track by $index">
                                        <div class="col-md-5 name">Trailing x{{key}}</div>
                                        <div class="col-md-7 value">{{val}} time(s) [{{game.getPercentageByBets(val)}}%/{{game.getExpectedPercentage(key,val)}}%]</div>
                                    </div><br />
                                    <div class="row" ng-repeat="(key, val) in game.consecutiveLossUniques track by $index">
                                        <div class="col-md-5 name">Consec. Loss x{{key}}</div>
                                        <div class="col-md-7 value">{{val}} time(s) [{{game.getPercentageByBets(val)}}%/{{game.getExpectedPercentage(key,val)}}%]</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <h4><i class="fa fa-book font-sm"></i> Event Log</h4>
                                <hr class="small" />
                                <div style="overflow-y:auto;overflow-x: hidden; min-height: 200px; max-height:460px">
                                    <div class="" ng-repeat="msg in game.message | orderBy:'id':true">
                                        <div class="row static-info">
                                            <div class="col-md-2 name text-right font-xs font-grey-mint">{{msg.id}}:</div>
                                            <div class="col-md-10 value" ng-bind-html="msg.text"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

@section scripts {
    @*<script src="@Url.Content("~/Scripts/controllers/RouletteTable.js")"></script>
    <script src="@Url.Content("~/Scripts/controllers/RouletteWheel.js")"></script>
    <script src="@Url.Content("~/Scripts/controllers/CasinoController.js")"></script>
    <script src="@Url.Content("~/Scripts/controllers/GameEngineController.js")"></script>*@

    @Scripts.Render("~/bundles/gameScripts")
}